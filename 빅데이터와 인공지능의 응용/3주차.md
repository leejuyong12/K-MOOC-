# 3주차



## 인간 행동 탐지 및 응용2



### 3-1. 위치 탐지 기술 및 응용 활용 예제 및 GPS개요

- Location(위치)
  - 네비게이션 등등
  - ex)
    - 1. Foursquare(Swarm)
      2. Sports Tracker
      3. 포켓몬 고
      4. Kidgy
      5. Waze
      6. Urban Planning and Operation
  - Accuracy
    - GPS : 10m
    - Cellular : 100m
    - WIFI + GPS + Cellular : 10~100m
- GPS : Global Positioning System
  - GPS Satellites = Space Vehicles(SVs)
    - 태양열 판
    - 24개의 위성(+3개의 백업 위성=27), 12,000m정도의 상공, 하루에 2바퀴, 6개의 서로 다른 플레인에서 돌아감
    - X,Y,Z 3차원 상
    - 군사 목적 or 민간 사용
  - Basic GPS Localization

![캡처](md-images/%EC%BA%A1%EC%B2%98-1632403866472.PNG)

- 3개의 위성을 활용해 X, Y, Z 를 알아내 좌표를 알아내기.
- 하지만 이것은 300KM가 넘는 오차가 발생했다. 왜? 위성들간의 시간 정보는 맞아있지만 이것을 받는 기계와는 시간이 맞지 않기 때문에 오류가 난다.



그래서

![캡처](md-images/%EC%BA%A1%EC%B2%98-1632404169073.PNG)

- 위 식에서 뒤의 에러 팩터를 하나 더 넣어준다. 에러팩터를 넣고 여기에다가 빛의 속도를 곱해서 이것을 거리 계산에 반영을 해준다.
- 에러팩터가 들어가기 때문에 X, Y, Z 말고 이 에러가 얼마만큼인지 알아내는 위성이 하나 더 필요하다. 그래서 총 4개의 위성이 필요하다.
- 결과적으로 이 4개의 위성으로부터 오는 신호를 이런 수식 기반으로 계산해보면 10~20m 이내에서 오차를 가지는 위치 정보를 가질 수 있다.

![캡처](md-images/%EC%BA%A1%EC%B2%98-1632404487774.PNG)

- 4개의 위성 - 3D / 3개의 위성 - 2D
- GPS가 잘 작동하지 않는 케이스
  - GPS는 물체를 통과해서 볼 수 없다.(GPS cannot see through objects)
  - 위성이 몰려있으면 에러가 더 많이 나타난다.
  - 물, 유리에 반사되어서 신호가 도착할 때

### 3-2. 위치 탐지 기술 및 응용 실내 위치 인식

- GPS를 통해 실외의 위치를 파악했다면 실내의 위치는 어떻게 파악할까?
- Common Localization Approaches
  - ![캡처](md-images/%EC%BA%A1%EC%B2%98-1632405053224.PNG)

- Triangulation

![캡처](md-images/%EC%BA%A1%EC%B2%98-1632405173508.PNG)

- 베이스 스테이션이 여러 개가 있고 여기서 위치를 탐지하고자 하는 디바이스로 신호를 쏘게 된다.
- 신호를 쏘게 되면 보내는 시간 그리고 받는 시간, 보내는 시간과 받는 시간을 알게 되면 이 차이를 활용해서 거리를 알 수 있다.
- 거리를 알면 바로 위치를 탐지해낼 수 있다.

- Triangulation

![캡처](md-images/%EC%BA%A1%EC%B2%98-1632405317536.PNG)

- RSSI Model-Based Localization
  - 특정 베이스 스테이션에서 특정 세기로 신호를 보낸다.
  - 이 신호는 공간을 돌아다니면서 신호의 세기가 점점 약해진다.
  - 신호를 받는 디바이스에서 신호의 세기가 얼마나 감소되었는지를 알면 처음 보낸 곳부터 받는 곳까지 얼마나 감소했는지를 보면 거리를 예측할 수 있다.
  - 이것의 어려운 점은 거리에 따라서 신호가 감소하는 것을 모델링하는 것이다.(방해물이 있기 때문에)

![캡처](md-images/%EC%BA%A1%EC%B2%98-1632405485413.PNG)

​		

- 어려운 점이 있지만 신호세기를 활용할 방법이 있지 않을까?
  - RSSI Fingerprints

![캡처](md-images/%EC%BA%A1%EC%B2%98-1632405618147.PNG)

- RSSI Fingerprints

  - 사전에 내가 탐지하고자 하는 위치에 미리 가서 어떤 디바이스 베이스 스테이션으로부터 오는 신호세기가 얼마나 되는지를 미리 다 측정해본다.
  - 빨간색이 베이스 스테이션(왼쪽 그림)

- 시스템 예시

  | Name of the system | Built By           | Signaling technique | Approach        |
  | ------------------ | ------------------ | ------------------- | --------------- |
  | Active Bat         | Univ. of Cambridge | Ultrasound          | Trilateration   |
  | Criket             | MIT                | Ultrasound + RF     | Proximity-based |
  | RADAR              | Microsoft          | WIFI                | RSSI-based      |
  | HORUS              | Univ. of Maryland  | WIFI                | RSSI-based      |

- Active Bat

  - 천장에 울트라 소닉 사운드(초음파)를 수신할 수 있는 비콘들을 쭉 그리드 형태로 붙여놓는다.(촘촘히)
  - 그 다음에 사용자가 초음파를 보낼 수 있는 디바이스를 가지고 다닌다.
  - 이 디바이스에서 초음파를 보내게 되고 나면 천장에 있는 비콘들에서 이 신호를 캡쳐하게 되고 두 사이의 신호에 대해 보낸 시간과 받는 시간의 시간차를 알아내어 거리를 계산한다.
  - 이것을 알아내게 되면 Trilateration을 통해서 위치를 인식할 수 있게 된다.
  - 단점은 이러한 기계들을 가지고 다니고 붙여놔야 한다는 것이다.

- Cricket

  ![캡처](md-images/%EC%BA%A1%EC%B2%98-1632406193963.PNG)

  - Active Bat 과는 다르게 좀 넓게 비콘들을 붙여놓는다.(방에 한두개 정도)
  - 회색으로 그려진 것이 비콘이다. Cricket에서는 신호를 수신하는 것이 아니라 자신의 위치를 담아서 신호를 보낸다.
  - 이것은 정확히 좌표를 나타내는 시스템이 아니라 나는 방 120호에 있다, 110호에 있다 이런 것을 탐지하기 위한 시스템이다.
  - 이런 비콘에서 보내는 신호들을 디바이스에서 수신하게 되고, 이 정보를 바탕으로 자신과 가장 가까운 비콘의 위치를 나의 위치로 결정하게 된다.
  - 좀 더 정확한 위치 계산

![캡처](md-images/%EC%BA%A1%EC%B2%98-1632406386841.PNG)

- Cricket 에서 비콘과 디바이스 사이의 거리를 어떻게 알아낼 것이냐는 것이 핵심 질문일 것이다.
  - 거리를 알아내는 방식을 사람들이 알아낸 것은 비콘이 RF 시그널과 울트라사운드 시그널(초음파)을 동시에 보내게 된다. 그런데 RF 시그널은 빛의 속도로 돌아다니는 시그널이고, 울트라사운드 시그널은 소리의 속도로 움직이는 시그널이다.
  - RF시그널은 보낸 순간에 바로 도착한다고 보면 되고, 울트라사운드시그널는 시간이 좀 더 걸려서 도착하게 된다.
  - 그래서 RF시그널과 울트라사운드시그널과 의 도착 시간 차이를 비교하게 되면 비콘까지의 거리를 대략적으롱 유추할 수 있게 된다.
  - 프라이버시 보안 가능
- RADAR 시스템
  - 기계들을 설치해야하는 코스트를 줄일 수 있는 기술
  - RADAR시스템은 2가지 페이즈로 작동하게 된다. (오프라인과 온라인)
  - ![캡처](md-images/%EC%BA%A1%EC%B2%98-1632412096545.PNG)
- 오프라인
  - 빨간 점과 같이 미리 핑거프린트 시그널 지문을 쭉 빌드해놓게 된다.
  - 엑세스 포인트로부터 시그널 strength를 재보면 탐지하고자 하는 위치를 계산할 수 있다.

- 온라인
  - 디바이스가 현재위치에서의 신호 세기를 측정한다.
  - 그 다음에 이 신호 세기가 사전에 핑거프린트 된 어떤 위치에서의 신호 세기와 가장 가까운지를 측정하게 된다.
  - 유클리디안 거리를 활용하여 구한다.
  - 평균 신호 세기 사용
- RADAR 시스템 장점
  - 디바이스들을 새로 설치하지 않고도 이미 있는 와이파이 기계들을 활용해 위치를 탐지할 수 있다.
- RADAR 시스템 단점
  - 평균 신호 세기를 사용하기 때문에 시간에 따라서 일정하지 않다는 문제가 있다.
  - 이 문제를 극복하기 위해 HORUS 시스템이 제안되었다.



- HORUS
  - 각 위치에서 신호의 히스토그램분포를 핑거프리팅 하게 된다.

![캡처](md-images/%EC%BA%A1%EC%B2%98-1632412650320.PNG)

![캡처](md-images/%EC%BA%A1%EC%B2%98-1632412691929.PNG)

- basic inference를 활용해서 어떤 분포를 따를 가능성이 더 높은지 위치를 탐지하게 된다.

![캡처](md-images/%EC%BA%A1%EC%B2%98-1632412837789.PNG)

- 지금까지 본 예제들은 모두 포인트 로컬라이제이션 문제였다.
- 어떤 위치에 가서 딱 한번만 내 위치를 물어보는 것이다.
- 하지만 흔히 애플리케이션 예제에서는 연속적으로 위치를 트래킹해야하는 경우가 많다.
- 그래서 히스토리를 확인하며 연속적인 위치를 좀 더 정확하게 계산할 수 있다.



- 요즘 많은 사람들이 제안하는 방식
  - 전구를 활용해 위치를 탐지하는 방식
  - 스마트 전구

![캡처](md-images/%EC%BA%A1%EC%B2%98-1632413023205.PNG)

### 3-3. 위치 프라이버시

- 내 위치를 보내면 내 정보가 노출된다.
- 내 위치를 노출하지 않고 위치 기반 서비스를 받을 수 있을까?
  - 약간의 내 정보를 노출해서 100%에 가까운 서비스를 받고 싶다.
- 위치 정보를 바로 주는 것이 아니라 중간 서버에게 전달한다.(annonymizing)

- Three Aspects of Anonymity
  - Frequency of access
    - Higher the frequency, greater the privacy threat
  - Delay sensitivity
    - Lesser the dealy, greater the privacy threat
  - Position accuracy
    - Higher the accuracy, greater the privacy threat
- Location k-Anonymity
  - 클라이언트가 위치기반의 서비스를 받기 위해서 나의 위치 정보를 서버에게 보내게 되었을때 이 서버가 이 위치정보를 바탕으로 나의 위치를 그 주변에 있는 k-Anonymity 1명의 다른 사람과 구별해낼 수 없게 된다면 이것을 k-Anonymity라고 부르게 됩니다.

- Spatial Cloaking
  - 사용자들이 위치 정보를 보냈을때 그 주변의 위치를 특정영역을 하나로 묶는다. 위치정보를 요약한다고 생각하면 된다.
- Temporal Cloaking
  - 같은 위치의 사람을 시간축 상으로 묶는다. 
- 위의 두가지를 하나로 묶은 Spatial-Temporal Cloaking 기법이 있다.
- K-Anonymity의 단점
  - Overlapping - 요약하기때문에 부정확하다.
  - 프라이버시를 공격하는 사람들이 지역을 조금씩 바꿔가면서 여러번 쿼리를 하면 특정 사용자의 위치를 알 수 있게 된다.
- CacheCloak
  - 내 위치를 가지고 쿼리하고 싶지 않다.
  - 앞으로 갈 , 내가 어디서 왔는지 path정보를 가지고 전체 쿼리를 한다.
  - 다른 사용자 없이 나 혼자만 그 장소에 있으면 나의 프라이버시가 그대로 노출된다.
  - 이것을 막기 위해 predicted path를 활용
